!function() {
    function n(n) {
        var t, r = n[0].toUpperCase(), e = n[1], o = n[2], a = n.slice(3), u = r + e;
        return o ? (t = u + "-KP" + o, a.length ? t + "-" + a.join("-") : t) : u;
    }
    function t(n) {
        var t = y(n, u);
        return [ t[0], t[1] ].concat(t[2].replace(i, "").split(""));
    }
    function r(n) {
        var t, r, e, u, i = n[0], p = n[1], c = n.slice(2), s = parseInt(i, 36) - 10, h = parseInt(p) - 1, f = c.map(function(n) {
            return parseInt(n);
        }).map(function(n) {
            return [ a[n - 1][0], a[n - 1][1] ];
        }).map(function(n, t) {
            var r = Math.pow(1 / 3, t + 1);
            return [ n[0] * r, n[1] * r ];
        });
        f.length ? (t = f.map(function(n) {
            return n[0];
        }), r = f.map(function(n) {
            return n[1];
        }), e = t.reduce(function(n, t) {
            return n + t;
        }), u = r.reduce(function(n, t) {
            return n + t;
        })) : (e = 0, u = 0);
        var l = s + e, g = h + u, d = Math.pow(1 / 3, f.length);
        return console.log(d), [ l * o, g * o, d * o ];
    }
    function e(n, t) {
        var r = n[0], e = n[1], o = n[2], a = t[0], u = t[1], i = t[2];
        return [ Math.hypot(a - r, u - e), Math.hypot(o, i) ];
    }
    var o = 300, a = [ [ 0, 2 ], [ 1, 2 ], [ 2, 2 ], [ 0, 1 ], [ 1, 1 ], [ 2, 1 ], [ 0, 0 ], [ 1, 0 ], [ 2, 0 ] ], u = /^([a-z])([12][0-9](?=(?:[k\s-]))|[1-9])((?:(?:\s+|-)?(?:kp?)?[1-9])*)(?:\s|-)?(?:kp?)?$/i, i = /[^1-9]/g, p = {}, c = {}, s = [ [ 50, 1579 ], [ 100, 1558 ], [ 150, 1538 ], [ 200, 1517 ], [ 250, 1496 ], [ 300, 1475 ], [ 350, 1453 ], [ 400, 1431 ], [ 450, 1409 ], [ 500, 1387 ], [ 550, 1364 ], [ 600, 1341 ], [ 650, 1317 ], [ 700, 1292 ], [ 750, 1267 ], [ 800, 1240 ], [ 850, 1212 ], [ 900, 1183 ], [ 950, 1152 ], [ 1e3, 1118 ], [ 1050, 1081 ], [ 1100, 1039 ], [ 1150, 988 ], [ 1200, 918 ], [ 1250, 800 ] ], h = 180 / Math.PI, f = function(n) {
        if (n < 50) return p;
        if (n > 1250) return c;
        var t, r, e, o, a, u, i, h, f, l;
        for (t = 0; t < s.length; t++) {
            if (r = s[t], e = s[t + 1], o = r[0], a = r[1], n === o) return a;
            if (!((u = e[0]) <= n)) return i = e[1], h = u - o, f = i - a, l = n - o, Math.round(f / h * l + a);
        }
    }, l = function(n, t) {
        var r = n[0], e = n[1], o = t[0], a = t[1], u = o - r, i = a - e, p = Math.hypot(u, i), c = u / p, s = i / p, f = Math.atan2(s, c), l = f * h;
        return 0 === c && 1 === s ? 180 : o > r && a >= e ? l + 90 : o >= r && a < e ? l + 90 : o < r && a >= e ? l + 90 : o <= r && a < e ? 180 - Math.abs(l) + 270 : void 0;
    }, g = function(n) {
        return [ n[0], n[1] ];
    }, d = function(n) {
        return [ n[0] + n[2], n[1] ];
    }, M = function(n) {
        return [ n[0] + n[2], n[1] + n[2] ];
    }, v = function(n) {
        return [ n[0], n[1] + n[2] ];
    }, m = function(n, t) {
        var r, e = t[0] - n[0], o = t[1] - n[1];
        if (Math.hypot(n[2], n[2]) > Math.hypot(e, o) || Math.hypot(t[2], t[2]) > Math.hypot(e, o)) return null;
        return 0 === e && o < 0 ? (1, r = [ [ d(n), v(t) ], [ g(n), M(t) ] ]) : e > 0 && o < 0 ? (2, 
        r = [ [ M(n), g(t) ], [ g(n), M(t) ] ]) : e > 0 && 0 === o ? (3, r = [ [ M(n), g(t) ], [ d(n), v(t) ] ]) : e > 0 && o > 0 ? (4, 
        r = [ [ v(n), d(t) ], [ d(n), v(t) ] ]) : 0 === e && o > 0 ? (5, r = [ [ v(n), d(t) ], [ M(n), g(t) ] ]) : e < 0 && o > 0 ? (6, 
        r = [ [ g(n), M(t) ], [ M(n), g(t) ] ]) : e < 0 && 0 === o ? (7, r = [ [ g(n), M(t) ], [ v(n), d(t) ] ]) : (8, 
        r = [ [ d(n), v(t) ], [ v(n), d(t) ] ]), [ l(r[0][0], r[0][1]), l(r[1][0], r[1][1]) ];
    }, y = function(n, t) {
        return n.match(t).slice(1);
    }, I = document.getElementById("i1"), b = document.getElementById("i2"), E = document.getElementById("output"), L = document.getElementById("p1"), T = document.getElementById("p2"), B = function(n, t) {
        return n = n === c ? 800 : n, t = t === p ? 1579 : t, "(min: " + (n = n < 0 ? 0 : n) + ", max: " + t + ")";
    }, H = function() {
        var o, a;
        try {
            var u, i, s, h, g = I.value, d = b.value, M = !1, v = !1;
            try {
                u = t(g), s = r(u), o = n(u);
            } catch (n) {
                M = !0;
            }
            try {
                i = t(d), h = r(i), a = n(i);
            } catch (n) {
                v = !0;
            }
            if (console.log(M, v), M || v) throw new Error();
            var y, H = e(s, h), w = H[0], x = H[1], k = w.toFixed(1), F = w - x, C = w + x, P = F.toFixed(1), j = C.toFixed(1), z = f(C), D = f(w), K = f(F), O = w ? parseInt(l(s, h)) : 0, R = m(s, h);
            y = D !== p && D !== c ? D + "</strong> <span>" + B(z, K) + "</span>" : D === c ? "Out of Range</strong>" : "Too Close</strong>";
            var U;
            R ? (R[0] = Math.floor(R[0]) % 360, R[1] = Math.ceil(R[1]) % 360, U = O + " degrees</strong> <span>" + B(R[0], R[1]) + "</span>") : U = O + " degrees</strong> <span>(high error)</span>";
            var $ = "Distance: <strong>" + k + "m</strong> <span>" + B(P, j) + "</span>", q = "Milliradian: <strong>" + y, A = "Bearing: <strong>" + U;
            E.innerHTML = $ + "<br>" + q + "<br>" + A, L.innerHTML = "<pre>" + o + "</pre>", 
            T.innerHTML = "<pre>" + a + "</pre>";
        } catch (n) {
            E.innerHTML = "&nbsp;<br>&nbsp;<br>&nbsp;", L.innerHTML = o ? "<pre>" + o + "</pre>" : "", 
            T.innerHTML = a ? "<pre>" + a + "</pre>" : "";
        }
    }, w = function(n) {
        H();
    };
    I.addEventListener("input", w), b.addEventListener("input", w);
}();