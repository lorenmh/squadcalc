!function() {
    function n(n) {
        var t, r = n[0].toUpperCase(), e = n[1], o = n[2], u = n.slice(3), a = r + e;
        return o ? (t = a + "-KP" + o, u.length ? t + "-" + u.join("-") : t) : a;
    }
    function t(n) {
        var t = b(n, a);
        return [ t[0], t[1] ].concat(t[2].replace(i, "").split(""));
    }
    function r(n) {
        var t, r, e, a, i = n[0], c = n[1], p = n.slice(2), s = parseInt(i, 36) - 10, f = parseInt(c) - 1, l = p.map(function(n) {
            return parseInt(n);
        }).map(function(n) {
            return [ u[n - 1][0], u[n - 1][1] ];
        }).map(function(n, t) {
            var r = Math.pow(1 / 3, t + 1);
            return [ n[0] * r, n[1] * r ];
        });
        l.length ? (t = l.map(function(n) {
            return n[0];
        }), r = l.map(function(n) {
            return n[1];
        }), e = t.reduce(function(n, t) {
            return n + t;
        }), a = r.reduce(function(n, t) {
            return n + t;
        })) : (e = 0, a = 0);
        var g = s + e, h = f + a, d = Math.pow(1 / 3, l.length);
        return console.log(d), [ g * o, h * o, d * o ];
    }
    function e(n, t) {
        var r = n[0], e = n[1], o = n[2], u = t[0], a = t[1], i = t[2];
        return [ Math.hypot(u - r, a - e), Math.hypot(o, i) ];
    }
    var o = 300, u = [ [ 0, 2 ], [ 1, 2 ], [ 2, 2 ], [ 0, 1 ], [ 1, 1 ], [ 2, 1 ], [ 0, 0 ], [ 1, 0 ], [ 2, 0 ] ], a = /^([a-z])([12][0-9](?=(?:[k\s-]))|[1-9])((?:(?:\s+|-)?(?:kp?)?[1-9])*)(?:\s|-)?(?:kp?)?$/i, i = /[^1-9]/g, c = {}, p = {}, s = [ [ 50, 1579 ], [ 100, 1558 ], [ 150, 1538 ], [ 200, 1517 ], [ 250, 1496 ], [ 300, 1475 ], [ 350, 1453 ], [ 400, 1431 ], [ 450, 1409 ], [ 500, 1387 ], [ 550, 1364 ], [ 600, 1341 ], [ 650, 1317 ], [ 700, 1292 ], [ 750, 1267 ], [ 800, 1240 ], [ 850, 1212 ], [ 900, 1183 ], [ 950, 1152 ], [ 1e3, 1118 ], [ 1050, 1081 ], [ 1100, 1039 ], [ 1150, 988 ], [ 1200, 918 ], [ 1250, 800 ] ], f = 180 / Math.PI, l = function(n) {
        if (n < 50) return c;
        if (n > 1250) return p;
        var t, r, e, o, u, a, i, f, l, g;
        for (t = 0; t < s.length; t++) {
            if (r = s[t], e = s[t + 1], o = r[0], u = r[1], n === o) return u;
            if (!((a = e[0]) <= n)) return i = e[1], f = a - o, l = i - u, g = n - o, Math.round(l / f * g + u);
        }
    }, g = function(n, t) {
        var r = n[0], e = n[1], o = t[0], u = t[1], a = o - r, i = u - e, c = Math.hypot(a, i), p = a / c, s = i / c, l = Math.atan2(s, p), g = l * f;
        return 0 === p && 1 === s ? 180 : o > r && u >= e ? g + 90 : o >= r && u < e ? g + 90 : o < r && u >= e ? g + 90 : o <= r && u < e ? 180 - Math.abs(g) + 270 : void 0;
    }, h = function(n) {
        return [ n[0], n[1] ];
    }, d = function(n) {
        return [ n[0] + n[2], n[1] ];
    }, v = function(n) {
        return [ n[0] + n[2], n[1] + n[2] ];
    }, m = function(n) {
        return [ n[0], n[1] + n[2] ];
    }, M = function(n, t, r) {
        return n[0] < r[0] && t[0] > r[0] && n[1] < r[1] && t[1] > r[1];
    }, y = function(n, t, r, e) {
        return M(n, t, r) || M(n, t, [ e[0], r[1] ]) || M(n, t, e) || M(n, t, [ r[0], e[1] ]);
    }, I = function(n, t) {
        var r, e = n[0], o = n[1], u = t[0], a = t[1], i = [ e + n[2], o + n[2] ], c = [ u + t[2], a + t[2] ], p = u - e, s = a - o;
        if (e === u && o === a || y(n, i, t, c) || y(t, c, n, i)) return null;
        return 0 === p && s < 0 ? (1, r = [ [ d(n), m(t) ], [ h(n), v(t) ] ]) : p > 0 && s < 0 ? (2, 
        r = [ [ v(n), h(t) ], [ h(n), v(t) ] ]) : p > 0 && 0 === s ? (3, r = [ [ v(n), h(t) ], [ d(n), m(t) ] ]) : p > 0 && s > 0 ? (4, 
        r = [ [ m(n), d(t) ], [ d(n), m(t) ] ]) : 0 === p && s > 0 ? (5, r = [ [ m(n), d(t) ], [ v(n), h(t) ] ]) : p < 0 && s > 0 ? (6, 
        r = [ [ h(n), v(t) ], [ v(n), h(t) ] ]) : p < 0 && 0 === s ? (7, r = [ [ h(n), v(t) ], [ m(n), d(t) ] ]) : (8, 
        r = [ [ d(n), m(t) ], [ m(n), d(t) ] ]), [ g(r[0][0], r[0][1]), g(r[1][0], r[1][1]) ];
    }, b = function(n, t) {
        return n.match(t).slice(1);
    }, E = document.getElementById("i1"), L = document.getElementById("i2"), T = document.getElementById("output"), B = document.getElementById("p1"), H = document.getElementById("p2"), w = function(n, t) {
        return n = n === p ? 800 : n, t = t === c ? 1579 : t, "(min: " + (n = n < 0 ? 0 : n) + ", max: " + t + ")";
    }, x = function() {
        var o, u;
        try {
            var a, i, s, f, h = E.value, d = L.value, v = !1, m = !1;
            try {
                a = t(h), s = r(a), o = n(a);
            } catch (n) {
                v = !0;
            }
            try {
                i = t(d), f = r(i), u = n(i);
            } catch (n) {
                m = !0;
            }
            if (console.log(v, m), v || m) throw new Error();
            var M, y = e(s, f), b = y[0], x = y[1], k = b.toFixed(1), F = b - x, C = b + x, P = F.toFixed(1), j = C.toFixed(1), z = l(C), D = l(b), K = l(F), O = b ? parseInt(g(s, f)) : 0, R = I(s, f);
            M = D !== c && D !== p ? D + "</strong> <span>" + w(z, K) + "</span>" : D === p ? "Out of Range</strong>" : "Too Close</strong>";
            var U;
            R ? (R[0] = Math.floor(R[0]) % 360, R[1] = Math.ceil(R[1]) % 360, U = O + " degrees</strong> <span>" + w(R[0], R[1]) + "</span>") : U = O + " degrees</strong> <span>(high error)</span>";
            var $ = "Distance: <strong>" + k + "m</strong> <span>" + w(P, j) + "</span>", q = "Milliradian: <strong>" + M, A = "Bearing: <strong>" + U;
            T.innerHTML = $ + "<br>" + q + "<br>" + A, B.innerHTML = "<pre>" + o + "</pre>", 
            H.innerHTML = "<pre>" + u + "</pre>";
        } catch (n) {
            T.innerHTML = "&nbsp;<br>&nbsp;<br>&nbsp;", B.innerHTML = o ? "<pre>" + o + "</pre>" : "", 
            H.innerHTML = u ? "<pre>" + u + "</pre>" : "";
        }
    }, k = function(n) {
        x();
    };
    E.addEventListener("input", k), L.addEventListener("input", k);
}();